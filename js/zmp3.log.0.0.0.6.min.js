var zmp3LogCommon={mediaId:"",pageId:"",pageName:"",userName:"",userId:"",zaloId:"",visitorId:"",isVip:"0",constants:{HOME_PAGE_NAME:"home",TOPIC_PAGE_NAME:"chu-de",SONG_PAGE_NAME:"bai-hat",VIDEO_PAGE_NAME:"video-clip",ALBUM_PAGE_NAME:"album",PLAYLIST_PAGE_NAME:"playlist",SEARCH_PAGE_NAME:"tim-kiem"},getMediaId:function(){return this.setMediaId(),this.mediaId},setMediaId:function(){this.isValidParam(zmp3HTML5)&&this.isValidParam(zmp3HTML5.currentItem)&&this.isValidParam(zmp3HTML5.currentItem.id)?this.mediaId=zmp3HTML5.currentItem.id:this.mediaId=""},getPageId:function(){return zmp3LogCommon.isValidParam(this.pageId)||this.setPageId(),this.pageId},setPageId:function(){var t=window.location.href,e=t.split("/")
if(e.length>=6){var o=e[5],n=o.substring(0,8)
zmp3LogCommon.isValidParam(n)&&(this.pageId=n)}},getPageName:function(){return this.isValidParam(this.pageName)||this.setPageName(),this.pageName},setPageName:function(){try{var t=window.location.href,e=window.location.origin+"/"
if(t===e)this.pageName=zmp3LogCommon.constants.HOME_PAGE_NAME
else{var o=t.split("/")
zmp3LogCommon.isValidParam(o)&&(o.length>=4&&(this.pageName=o[3]),4===o.length&&(this.pageName=this.pageName.substring(0,this.pageName.length-5)))}}catch(n){console.log("Exception at zmp3LogCommon.setPageName: ",n)}},getUsername:function(){return this.isValidParam(this.username)||this.setUsername(),this.username},setUsername:function(){this.isValidParam(MP3)&&this.isValidParam(MP3.ACCOUNT_NAME)?this.username=MP3.ACCOUNT_NAME:this.username=""},getUserId:function(){return this.isValidParam(this.userId)||this.setUserId(),this.userId},setUserId:function(){this.isValidParam(MP3)&&this.isValidParam(MP3.ACCOUNT_ID)?this.userId=MP3.ACCOUNT_ID:this.userId=""},getZaloId:function(){return this.isValidParam(this.zaloId)||this.setZaloId(),this.zaloId},setZaloId:function(){this.isValidParam(MP3)&&this.isValidParam(MP3.ZALO_ID)?this.zaloId=MP3.ZALO_ID:this.zaloId=""},getVisitorId:function(){return this.isValidParam(this.visitorId)?this.visitorId:void this.setVisitorId()},setVisitorId:function(){"object"==typeof ZA&&ZA.getVisitorID(function(t){return zmp3LogCommon.visitorId=t,zmp3LogCommon.getVisitorId()})},setIsVip:function(){"undefined"!=typeof MP3?this.isVip=0==MP3.VIP?"0":"1":this.isVip="0"},getIsVip:function(){return this.isVip},isValidParam:function(t){if(null===t||void 0===t)return!1
var e=typeof t
return"string"===e||"array"===e?t.length>0:"number"===e?t>0:"function"===e||"object"===e&&t?Object.keys(t).length>0:!1},getParameterByName:function(t){var e=window.location.href
t=t.replace(/[\[\]]/g,"\\$&")
var o=RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),n=o.exec(e)
return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},encode:function(t){if(this.isValidParam(t))try{t=JSON.stringify(t),t=t.replace(/\+/g,"-"),t=t.replace(/\//g,"_"),t=t.replace(/\=/g," ")
var e=""
return e="undefined"!=typeof encodeURIComponent&&"function"==typeof encodeURIComponent?window.btoa(unescape(encodeURIComponent(t))):window.btoa(t)}catch(o){return console.log("Exception at zmp3LogCommon.encode: ",o),""}return""},push:function(t,e){if(this.isValidParam(t)&&this.isValidParam(e))try{if(!this.isValidParam(MP3)||!this.isValidParam(MP3.LOG_URL))return null
var o=MP3.LOG_URL+"logv2/"+e+"?data="+t+"&ts="+(new Date).getTime(),n=new Image
n.src=o}catch(i){console.log("Exception at zmp3LogCommon.push: ",i)}}},zmp3LogLoginZalo={constants:{LOG_CATEGORY_LOGIN_ZALO:"log-login-zalo",LOGIN_CLICK:"1",LOGIN_SUCCESS:"2",LOGIN_FAUFT:"3"},trackLoginZaloSuccess:function(t){if("object"==typeof zmp3LogCommon&&zmp3LogCommon.isValidParam(t)){var e={}
e.username=zmp3LogCommon.getUsername(),e.userId=zmp3LogCommon.getUserId(),e.zaloId=zmp3LogCommon.getZaloId(),zmp3LogCommon.setIsVip(),e.isVip=zmp3LogCommon.getIsVip(),zmp3LogCommon.isValidParam(e.zaloId)?e.loginStatus=this.constants.LOGIN_SUCCESS:e.loginStatus=this.constants.LOGIN_FAUFT,"object"==typeof ZA&&ZA.getVisitorID(function(t){if(e.visitorId=t,zmp3LogCommon.isValidParam(e.visitorId)){var o=zmp3LogCommon.encode(e)
zmp3LogCommon.push(o,zmp3LogLoginZalo.constants.LOG_CATEGORY_LOGIN_ZALO)}})}},trackLoginZaloClick:function(){if("object"==typeof zmp3LogCommon){var t={}
t.loginStatus=this.constants.LOGIN_CLICK,"object"==typeof ZA&&ZA.getVisitorID(function(e){if(t.visitorId=e,zmp3LogCommon.isValidParam(t.visitorId)){var o=zmp3LogCommon.encode(t)
zmp3LogCommon.push(o,zmp3LogLoginZalo.constants.LOG_CATEGORY_LOGIN_ZALO)}})}},listenLoginZaloClick:function(){$("#loginBox").on("click","#fn-login-zalo",function(){zmp3LogLoginZalo.trackLoginZaloClick()})}}
if(void 0!==zmp3LogLoginZalo&&null!==zmp3LogLoginZalo)try{zmp3LogLoginZalo.listenLoginZaloClick()}catch(ex){console.log("Exception at zmp3LogLoginZalo.listenLoginZaloClick: ",ex)}var zmp3LogListenTime={isAlbum:"",isOffical:"",listenTime:5,counterListenTime:"",genres:"",artists:"",getIsAlbum:function(){return zmp3LogCommon.isValidParam(this.isAlbum)||this.setIsAlbum(),this.isAlbum},setIsAlbum:function(){var t=!1
try{t=$("#html5player").data().isalbum,t===!0?this.isAlbum=1:this.isAlbum=0}catch(e){console.log("Exception at zmp3LogListenTime.setIsAlbum: ",e)}},getIsOffical:function(){return zmp3LogCommon.isValidParam(this.isOffical)||this.setIsOffical(),this.isOffical},setIsOffical:function(){var t=!1
try{t=$("#html5player").data().isoffical,t===!0?this.isOffical=1:this.isOffical=0}catch(e){console.log("Exception at zmp3LogListenTime.setIsOffical: ",e)}},getGenres:function(){return zmp3LogCommon.isValidParam(this.genres)||this.setGenres(),this.genres},setGenres:function(){var t=""
t=$(".genre-track-log")
var e=""
try{if(zmp3LogCommon.isValidParam(t)&&t.length>0)for(var o=0;o<t.length;o++)e+=$(t[o]).attr("data-id"),o<t.length-1&&(e+=",")
this.genres=e}catch(n){console.log("Exception at zmp3LogListenTime.setGenres: ",n)}},getArtists:function(){return zmp3LogCommon.isValidParam(this.artists)||this.setArtists(),this.artists},setArtists:function(){var t=""
t=$(".artist-track-log")
var e=""
try{if(zmp3LogCommon.isValidParam(t)&&t.length>0)for(var o=0;o<t.length;o++)e+=$(t[o]).attr("data-id"),o<t.length-1&&(e+=",")
this.artists=e}catch(n){console.log("Exception at zmp3LogListenTime.setArtists: ",n)}},constants:{LOG_CATEGORY_LISTEN_TIME:"log-listen-time",CYCLE_UPDATE_LISTEN_TIME:3e4},getListenTime:function(){return this.setListenTime(),this.listenTime},setListenTime:function(){zmp3LogCommon.isValidParam(zmp3HTML5)&&zmp3LogCommon.isValidParam(zmp3HTML5.currentTime)&&(this.listenTime=parseInt(zmp3HTML5.currentTime))},funcTrackLog:function(){if(zmp3LogCommon.isValidParam(zmp3HTML5)){var t={}
t.pageName=zmp3LogCommon.getPageName(),(t.pageName===zmp3LogCommon.constants.ALBUM_PAGE_NAME||t.pageName===zmp3LogCommon.constants.PLAYLIST_PAGE_NAME)&&(t.playlistId=zmp3LogCommon.getPageId(),t.isAlbum=zmp3LogListenTime.getIsAlbum(),t.isOffical=zmp3LogListenTime.getIsOffical()),t.mediaId=zmp3LogCommon.getMediaId(),t.username=zmp3LogCommon.getUsername(),t.userId=zmp3LogCommon.getUserId(),t.zaloId=zmp3LogCommon.getZaloId(),t.genres=this.getGenres(),t.artists=this.getArtists(),t.listenTime=zmp3LogListenTime.getListenTime(),"object"==typeof ZA&&ZA.getVisitorID(function(e){if(t.visitorId=e,zmp3LogCommon.isValidParam(t.visitorId)){var o=zmp3LogCommon.encode(t)
zmp3LogCommon.isValidParam(o)&&zmp3LogCommon.push(o,zmp3LogListenTime.constants.LOG_CATEGORY_LISTEN_TIME)}})}},handlingListenTimeLog:function(){try{}catch(t){console.log("Exception at zmp3LogListenTime.handlingListenTimeLog: ",t)}}},zmp3LogListenFlow={typeMedia:"",isAlbum:"",isOffical:"",genres:"",artists:"",orderInAlbumPlaylist:"",idMediaListenBefore:"",lastTimeListen:"",timeBetweenTwoItem:"",tuser:"",listenTime:5e3,listenTimeSongInAlbum:5e3,ver:"v42.8.5.7.5",loopMode:[],loopModeSongInAlbum:[],isAutoMedia:0,counterListenTimeMedia:null,counterListenTimeSongInAlbum:null,sParamsMedia:"",constants:{LOG_CATEGORY_LISTEN_FLOW:"log-listen-flow",LOCAL_STORAGE_LISTEN_SONG_BEFORE:"__zmp3lnsongbf",LOCAL_STORAGE_LISTEN_VIDEO_BEFORE:"__zmp3lnvideobf",LOCAL_STORAGE_LISTEN_ALBUM_PLAYLIST_BEFORE:"__zmp3lnalbumplaylistbf",TYPE_SONG:1,TYPE_VIDEO:2,TYPE_ALBUM_PLAYLIST:50,CYCLE_TIME_UPDATE_LSTEN_TIME:5e3},getTypeMedia:function(){return this.typeMedia},setTypeMedia:function(t){zmp3LogCommon.isValidParam(t)&&(this.typeMedia=t)},getIsAlbum:function(){return zmp3LogCommon.isValidParam(this.isAlbum)||this.setIsAlbum(),this.isAlbum},setIsAlbum:function(){var t=!1
try{t=$("#html5player").data().isalbum,t===!0?this.isAlbum=1:this.isAlbum=0}catch(e){console.log("Exception at zmp3LogListenFlow.setIsAlbum: ",e)}},getIsOffical:function(){return zmp3LogCommon.isValidParam(this.isOffical)||this.setIsOffical(),this.isOffical},setIsOffical:function(){var t=!1
try{t=$("#html5player").data().isoffical,t===!0?this.isOffical=1:this.isOffical=0}catch(e){console.log("Exception at zmp3LogListenFlow.setIsOffical: ",e)}},getGenres:function(t){return this.setGenres(t),this.genres},setGenres:function(t){try{var e="",o=""
if(t===!1){if(o=$(".genre-track-log"),zmp3LogCommon.isValidParam(o)&&o.length>0)for(var n=0;n<o.length;n++)e+=$(o[n]).attr("data-id"),n<o.length-1&&(e+=",")}else{var i=this.getOrderInAlbumPlaylist()
if(zmp3LogCommon.isValidParam(i)){var a=$(".genre-track-log-item-"+i)
if(null!==a&&""!==a){var e=$(a).attr("data-id")
void 0!==e&&(e=e.replace("[","").replace("]","").replace(" ",""))}}}this.genres=e}catch(s){console.log("Exception at zmp3LogListenFlow.setGenres: ",s)}},getArtists:function(t){return this.setArtists(t),this.artists},setArtists:function(t){try{var e="",o=""
if(t===!1){if(o=$(".artist-track-log"),zmp3LogCommon.isValidParam(o)&&o.length>0)for(var n=0;n<o.length;n++)e+=$(o[n]).attr("data-id"),n<o.length-1&&(e+=",")}else{var i=this.getOrderInAlbumPlaylist()
if(zmp3LogCommon.isValidParam(i))for(var a=$(".artist-track-log-item-"+i),n=0;n<a.length;n++)e+=$(a[n]).attr("data-id"),n<a.length-1&&(e+=",")}this.artists=e}catch(s){console.log("Exception at zmp3LogListenFlow.setArtists",s)}},getOrderInAlbumPlaylist:function(){return this.setOrderInAlbumPlaylist(),this.orderInAlbumPlaylist},setOrderInAlbumPlaylist:function(){var t=zmp3LogCommon.getParameterByName("st")
null===t?t="01":1==t.length&&(t="0"+t),this.orderInAlbumPlaylist=t},getLastTimeListen:function(){return this.lastTimeListen},setLastTimeListen:function(t){zmp3LogCommon.isValidParam(t)&&(this.lastTimeListen=t)},getSparamsMedia:function(){return this.sParamsMedia},setSparamsMedia:function(t){this.sParamsMedia=t},getListenTime:function(){return this.listenTime},setListenTime:function(t){this.listenTime=t},getListenTimeSongInAlbum:function(){return this.listenTimeSongInAlbum},setListenTimeSongInAlbum:function(t){zmp3LogCommon.isValidParam(t)&&(this.listenTimeSongInAlbum=t)},getLoopMode:function(){return""+this.loopMode},setLoopMode:function(t){(0==this.loopMode.length||this.loopMode.length>0&&t!=this.loopMode[this.loopMode.length-1])&&this.loopMode.push(parseInt(t))},resetLoopMode:function(){this.loopMode.length>=1&&(this.loopMode=[this.loopMode[this.loopMode.length-1]])},getVer:function(){return this.ver},getLoopModeSongInAlbum:function(){return""+this.loopModeSongInAlbum},setLoopModeSongInAlbum:function(t){(0==this.loopModeSongInAlbum.length||this.loopModeSongInAlbum.length>0&&t!=this.loopModeSongInAlbum[this.loopModeSongInAlbum.length-1])&&this.loopModeSongInAlbum.push(parseInt(t))},resetLoopModeSongInAlbum:function(){this.loopModeSongInAlbum.length>=1?this.loopModeSongInAlbum=[this.loopModeSongInAlbum[this.loopModeSongInAlbum.length-1]]:this.loopModeSongInAlbum=[]},getIsAutoMedia:function(){return this.isAutoMedia},setIsAutoMedia:function(t){this.isAutoMedia=t},resetIsAutoMedia:function(){this.isAutoMedia=0},getTimeBetweenTwoItem:function(){return this.setTimeBetweenTwoItem(),this.timeBetweenTwoItem},setTimeBetweenTwoItem:function(){var t="",e=(new Date).getTime(),o=this.getLastTimeListen()
if(zmp3LogCommon.isValidParam(o)){var t=e-this.getLastTimeListen()
zmp3LogCommon.isValidParam(t)&&(this.timeBetweenTwoItem=t)}},getTuser:function(){return zmp3LogCommon.isValidParam(this.tuser)||this.setTuser(),this.tuser},setTuser:function(){function t(t){for(var e=t+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var i=o[n];" "==i.charAt(0);)i=i.substring(1)
if(0==i.indexOf(e))return i.substring(e.length,i.length)}return""}this.tuser=t("tuser")},getIdMediaListenBefore:function(){return this.idMediaListenBefore},setIdMediaListenBefore:function(t){zmp3LogCommon.isValidParam(t)&&(this.idMediaListenBefore=t)},parseLocalData:function(t){return zmp3LogCommon.isValidParam(t)?(listenMediaBfarr=t.split("."),listenMediaBfarr):void 0},checkLoopSuggestion:function(){try{var t=this.getIdMediaListenBefore(),e=$(".widget-content > ul > li")
if(zmp3LogCommon.isValidParam(e)){var o=e[0]
if(idFirstRec=$(o).attr("data-id"),null!==idFirstRec&&""!==idFirstRec&&idFirstRec===t&&(1==this.getTypeMedia()&&zmp3LogCommon.getPageName()===zmp3LogCommon.constants.SONG_PAGE_NAME||2==this.getTypeMedia()&&zmp3LogCommon.getPageName()===zmp3LogCommon.constants.VIDEO_PAGE_NAME||50==this.getTypeMedia()&&(zmp3LogCommon.getPageName()===zmp3LogCommon.constants.ALBUM_PAGE_NAME||zmp3LogCommon.getPageName()===zmp3LogCommon.constants.PLAYLIST_PAGE_NAME)))return!0}}catch(n){console.log("Exception at zmp3LogListenFlow.checkLoopSuggestion",n)}return!1},removeFirstMediaSuggest:function(){var t=$(".widget-content > ul > li")
if(zmp3LogCommon.isValidParam(t)){var e=t[0]
$(e).addClass("none")}},updateStorageMedia:function(t,e,o,n,i){n||clearInterval(zmp3LogListenFlow.counterListenTimeMedia)
var a={},s=""
a.ver=zmp3LogListenFlow.getVer(),a.username=zmp3LogCommon.getUsername(),a.userId=zmp3LogCommon.getUserId(),a.zaloId=zmp3LogCommon.getZaloId(),zmp3LogCommon.setIsVip(),a.isVip=zmp3LogCommon.getIsVip(),a.pageName=o,a.genres=this.getGenres(n),a.artists=this.getArtists(n),a.mediaId=e,a.tuser=this.getTuser(),a.timeBetweenTwoItem=this.getTimeBetweenTwoItem(),a.idMediaListenBefore=this.getIdMediaListenBefore(),1==n&&(a.playlistId=zmp3LogCommon.getPageId(),a.order=zmp3LogListenFlow.getOrderInAlbumPlaylist(),a.isAlbum=zmp3LogListenFlow.getIsAlbum()),a.isAuto=this.getIsAutoMedia(),"object"==typeof ZA&&ZA.getVisitorID(function(e){function r(){"object"==typeof zmp3Player&&zmp3Player.isPlaying()&&(zmp3LogListenFlow.setListenTimeSongInAlbum(parseInt(zmp3LogListenFlow.getListenTimeSongInAlbum())+parseInt(zmp3LogListenFlow.constants.CYCLE_TIME_UPDATE_LSTEN_TIME)),a.listenTime=zmp3LogListenFlow.getListenTimeSongInAlbum(),a.loopMode=zmp3LogListenFlow.getLoopModeSongInAlbum(),c=zmp3LogCommon.encode(a),l="",l=t+"."+a.mediaId,l+="."+m,l+="."+c,l+=".0",zmp3LogListenFlow.setLocalStorageListenBefore(s,l))}function r(){("object"==typeof zmp3Player&&zmp3Player.isPlaying()||s===zmp3LogListenFlow.constants.LOCAL_STORAGE_LISTEN_VIDEO_BEFORE)&&(zmp3LogListenFlow.setListenTime(parseInt(zmp3LogListenFlow.getListenTime())+parseInt(zmp3LogListenFlow.constants.CYCLE_TIME_UPDATE_LSTEN_TIME)),a.listenTime=zmp3LogListenFlow.getListenTime(),a.loopMode=zmp3LogListenFlow.getLoopMode(),c=zmp3LogCommon.encode(a),l="",l=t+"."+a.mediaId,l+="."+m,l+="."+c,l+=".0",zmp3LogListenFlow.setLocalStorageListenBefore(s,l))}if(a.visitorId=e,zmp3LogCommon.isValidParam(a.visitorId)){var m=(new Date).getTime()
a.listenTime=zmp3LogListenFlow.getListenTime()
var c=zmp3LogCommon.encode(a),l=""
switch(l=t+"."+a.mediaId,l+="."+m,l+="."+c,l+=".0",o){case zmp3LogCommon.constants.SONG_PAGE_NAME:s=zmp3LogListenFlow.constants.LOCAL_STORAGE_LISTEN_SONG_BEFORE
break
case zmp3LogCommon.constants.VIDEO_PAGE_NAME:s=zmp3LogListenFlow.constants.LOCAL_STORAGE_LISTEN_VIDEO_BEFORE
break
case zmp3LogCommon.constants.ALBUM_PAGE_NAME:case zmp3LogCommon.constants.PLAYLIST_PAGE_NAME:s=zmp3LogListenFlow.constants.LOCAL_STORAGE_LISTEN_ALBUM_PLAYLIST_BEFORE}n?(zmp3LogListenFlow.setLocalStorageListenBefore(s,l),clearInterval(zmp3LogListenFlow.counterListenTimeSongInAlbum),zmp3LogListenFlow.setListenTimeSongInAlbum(i),r(),zmp3LogListenFlow.counterListenTimeSongInAlbum=setInterval(function(){r()},zmp3LogListenFlow.constants.CYCLE_TIME_UPDATE_LSTEN_TIME)):(zmp3LogListenFlow.setLocalStorageListenBefore(s,l),zmp3LogListenFlow.setListenTime(i),r(),zmp3LogListenFlow.counterListenTimeMedia=setInterval(function(){r()},zmp3LogListenFlow.constants.CYCLE_TIME_UPDATE_LSTEN_TIME))}})},updateIsAutoMedia:function(t,e){var o=""
o=this.getLocalStorageListenBefore(t)
var n=this.parseLocalData(o),i=""
void 0===n||null==n||n.length<4||(i=n[0],i+="."+n[1],i+="."+n[2],i+="."+n[3],i+="."+e,zmp3LogListenFlow.setLocalStorageListenBefore(t,i))},setLocalStorageListenBefore:function(t,e){zmp3LogCommon.isValidParam(t)&&zmp3LogCommon.isValidParam(e)&&"undefined"!=typeof localStorage&&localStorage.setItem(t,e)},getLocalStorageListenBefore:function(t){var e=""
if("undefined"!=typeof localStorage){switch(t){case this.constants.LOCAL_STORAGE_LISTEN_SONG_BEFORE:e=localStorage.getItem(this.constants.LOCAL_STORAGE_LISTEN_SONG_BEFORE)
break
case this.constants.LOCAL_STORAGE_LISTEN_VIDEO_BEFORE:e=localStorage.getItem(this.constants.LOCAL_STORAGE_LISTEN_VIDEO_BEFORE)
break
case this.constants.LOCAL_STORAGE_LISTEN_ALBUM_PLAYLIST_BEFORE:e=localStorage.getItem(this.constants.LOCAL_STORAGE_LISTEN_ALBUM_PLAYLIST_BEFORE)}return e}},funcTrackLogMedia:function(t){try{var e="",o=""
zmp3LogCommon.getPageName()===zmp3LogCommon.constants.SONG_PAGE_NAME&&(e=this.constants.TYPE_SONG,o=this.constants.LOCAL_STORAGE_LISTEN_SONG_BEFORE),zmp3LogCommon.getPageName()===zmp3LogCommon.constants.VIDEO_PAGE_NAME&&(e=this.constants.TYPE_VIDEO,o=this.constants.LOCAL_STORAGE_LISTEN_VIDEO_BEFORE),(zmp3LogCommon.getPageName()===zmp3LogCommon.constants.ALBUM_PAGE_NAME||zmp3LogCommon.getPageName()===zmp3LogCommon.constants.PLAYLIST_PAGE_NAME)&&(e=this.constants.TYPE_ALBUM_PLAYLIST,o=this.constants.LOCAL_STORAGE_LISTEN_ALBUM_PLAYLIST_BEFORE)
var n=""
n=this.getLocalStorageListenBefore(o)
var i=this.parseLocalData(n)
void 0!==i&&5===i.length&&(this.setTypeMedia(i[0]),this.setIdMediaListenBefore(i[1]),this.setLastTimeListen(i[2]),this.setSparamsMedia(i[3]),this.setIsAutoMedia(i[4]),zmp3LogCommon.push(zmp3LogListenFlow.getSparamsMedia(),zmp3LogListenFlow.constants.LOG_CATEGORY_LISTEN_FLOW),this.checkLoopSuggestion()&&this.removeFirstMediaSuggest())
var a=!1,s=zmp3LogCommon.getPageId()
this.updateStorageMedia(e,s,zmp3LogCommon.getPageName(),a,t)}catch(r){console.log("Exception at zmp3LogListenFlow.onProgress",r)}},funcTrackLogSongInAlbumPlaylist:function(t){var e=""
e=this.getLocalStorageListenBefore(this.constants.LOCAL_STORAGE_LISTEN_SONG_BEFORE)
var o=this.parseLocalData(e)
void 0!==o&&5===o.length&&(this.setTypeMedia(o[0]),this.setIdMediaListenBefore(o[1]),this.setLastTimeListen(o[2]),this.setSparamsMedia(o[3]),this.setIsAutoMedia(o[4]),zmp3LogCommon.push(zmp3LogListenFlow.getSparamsMedia(),zmp3LogListenFlow.constants.LOG_CATEGORY_LISTEN_FLOW),this.checkLoopSuggestion()&&this.removeFirstMediaSuggest())
var n=!0
this.updateStorageMedia(this.constants.TYPE_SONG,t,zmp3LogCommon.constants.SONG_PAGE_NAME,n,5e3)}},zmp3LogRecommend={order:1,recIds:[],posOfLastItem:0,tuser:"",constants:{LOG_CATEGORY_RECOMMEND:"log-recommend"},getOrder:function(){return this.order},increaseOrder:function(){this.order++},getRecIds:function(){return this.recIds},setRecIds:function(t){""!=t&&this.recIds.push(t)},getPosOfLastItem:function(){return this.posOfLastItem},setPosOfLastItem:function(t){t>0&&(this.posOfLastItem=t)},getTuser:function(){return zmp3LogCommon.isValidParam(this.tuser)||this.setTuser(),this.tuser},setTuser:function(){function t(t){for(var e=t+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var i=o[n];" "==i.charAt(0);)i=i.substring(1)
if(0==i.indexOf(e))return i.substring(e.length,i.length)}return""}this.tuser=t("tuser")},genRecIds:function(){var t=$(".widget-content > ul > li")
if("object"==typeof t){for(var e=this.getPosOfLastItem(),o=e;o<t.length;o++)this.setRecIds($(t[o]).attr("data-id"))
this.setPosOfLastItem(t.length)}},reset:function(){this.recIds=[]},handlingRecomendLog:function(){try{var t={}
t.order=this.getOrder(),t.pageName=zmp3LogCommon.getPageName(),t.mediaId=zmp3LogCommon.getPageId(),t.username=zmp3LogCommon.getUsername(),t.userId=zmp3LogCommon.getUserId(),t.zaloId=zmp3LogCommon.getZaloId(),zmp3LogCommon.setIsVip(),t.isVip=zmp3LogCommon.getIsVip(),"object"==typeof ZA&&ZA.getVisitorID(function(e){if(t.visitorId=e,zmp3LogCommon.isValidParam(t.visitorId)){zmp3LogRecommend.genRecIds(),arrRecIds=zmp3LogRecommend.getRecIds(),t.recIds=arrRecIds.join(),t.tuser=zmp3LogRecommend.getTuser()
var o=zmp3LogCommon.encode(t)
zmp3LogCommon.isValidParam(o)&&zmp3LogCommon.push(o,zmp3LogRecommend.constants.LOG_CATEGORY_RECOMMEND),zmp3LogRecommend.increaseOrder(),zmp3LogRecommend.reset()}})}catch(e){console.log("Exception at zmp3LogRecommend.handlingRecomendLog: ",e)}}}
if(void 0!==zmp3LogRecommend&&null!==zmp3LogRecommend&&"function"==typeof zmp3LogRecommend.handlingRecomendLog)try{void 0!==zmp3LogCommon&&null!==zmp3LogCommon&&(zmp3LogCommon.getPageName()===zmp3LogCommon.constants.SONG_PAGE_NAME||zmp3LogCommon.getPageName()===zmp3LogCommon.constants.VIDEO_PAGE_NAME||zmp3LogCommon.getPageName()===zmp3LogCommon.constants.ALBUM_PAGE_NAME||zmp3LogCommon.getPageName()===zmp3LogCommon.constants.PLAYLIST_PAGE_NAME)&&$(function(){zmp3LogRecommend.handlingRecomendLog()})}catch(ex){console.log("Exception at zmp3LogRecommend.handlingRecomendLog: ",ex)}var zmp3LogRef={redirectPageName:"",redirectMediaId:"",order:"",tuser:"",constants:{LOG_CATEGORY_SEACH_SUGGEST_NOT_FOUNND:"log-search-sg-nf",LOG_CATEGORY_REF:"log-ref",SELECT_SESSION_SEARCH_SUGGEST:"#sugSong, #sugAlbum, #sugVideo, #sugArtist",SESSION_NAME_SEARCH_SUGGEST:"search-suggest",SELECT_SESSION_PLAY_RECOMMEND:"#songRec, #videoRec, #playlistRec",SESSION_NAME_SONG_RECOMMEND:"song-recommend",SESSION_NAME_VIDEO_RECOMMEND:"video-recommend",SESSION_NAME_ALBUM_RECOMMEND:"album-recommend",SELECT_SESSION_ALBUM_RELATIVE:"#albumOfArtist",SESSION_NAME_ALBUM_RELATIVE:"album-relative",SELECT_SESSION_VIDEO_RELATIVE:"#videoOfArtist",SESSION_NAME_VIDEO_RELATIVE:"video-relative",SELECT_SESSION_PLAYLIST_COLLECTION:"#albumCollection",SESSION_NAME_PLAYLIST_COLLECTION:"playlist-collect",SELECT_SESSION_PLAYLIST_ITEMS_ICON_REDIRECT:"#playlistItems .direct",SESSION_NAME_PLAYLIST_ITEMS_ICON_REDIRECT:"playlist-items-icon-redirect",SELECT_SESSION_PLAY_ICON_JUMP_MV:"#html5player .zm-jump-mv",SESSION_NAME_PLAY_ICON_JUMP_MV:"icon-jump-mv",SELECT_SESSION_PLAYLIST_ITEMS_ICON_JUMP_MV:"#playlistItems .video",SESSION_NAME_PLAYLIST_ITEMS_ICON_JUMP_MV:"pl-icon-jump-mv",SELECT_SESSION_HOME_SLIDES_BANNER:"#feature",SESSION_NAME_HOME_SLIDES_BANNER:"home-banner",SELECT_SESSION_HOME_ALBUM_HOT:"#albumHot",SESSION_NAME_HOME_ALBUM_HOT:"home-album-hot",SELECT_SESSION_HOME_PLAYLIST_COLLECTION:"#albumCollection",SESSION_NAME_HOME_PLAYLIST_COLLECTION:"home-playlist-collection",SELECT_SESSION_HOME_VIDEO_HOT:"#videohot",SESSION_NAME_HOME_VIDEO_HOT:"home-video-hot",SELECT_SESSION_HOME_VIET_HOT_SONG:"#viet-hot-song",SESSION_NAME_HOME_VIET_HOT_SONG:"home-viet-hot",SELECT_SESSION_HOME_VIET_NEW_SONG:"#viet-new-song",SESSION_NAME_HOME_VIET_NEW_SONG:"home-viet-new",SELECT_SESSION_HOME_CHART_VIET_SONG:"#_chart_songIWZ9Z08I",SESSION_NAME_HOME_CHART_VIET_SONG:"home-chart-viet-song",SELECT_SESSION_HOME_CHART_AUMY_SONG:"#_chart_songIWZ9Z0BW",SESSION_NAME_HOME_CHART_AUMY_SONG:"home-chart-aumy-song",SELECT_SESSION_HOME_CHART_HAN_SONG:"#_chart_songIWZ9Z0BO",SESSION_NAME_HOME_CHART_HAN_SONG:"home-chart-han-song",SELECT_SESSION_HOME_CHART_VIET_SONG_ICON_PLAY_ALL:"._chart_songIWZ9Z08I.icon-play-all",SESSION_NAME_HOME_CHART_VIET_SONG_ICON_PLAY_ALL:"home-chart-viet-song-icon-play-all",SELECT_SESSION_HOME_CHART_AUMY_SONG_ICON_PLAY_ALL:"._chart_songIWZ9Z0BW.icon-play-all",SESSION_NAME_HOME_CHART_AUMY_SONG_ICON_PLAY_ALL:"home-chart-aumy-song-icon-play-all",SELECT_SESSION_HOME_CHART_HAN_SONG_ICON_PLAY_ALL:"._chart_songIWZ9Z0BO.icon-play-all",SESSION_NAME_HOME_CHART_HAN_SONG_ICON_PLAY_ALL:"home-chart-han-song-icon-play-all",SELECT_SESSION_HOME_CHART_VIET_VIDEO:"#_chart_videoIWZ9Z08W",SESSION_NAME_HOME_CHART_VIET_VIDEO:"home-chart-viet-video",SELECT_SESSION_HOME_CHART_AUMY_VIDEO:"#_chart_videoIWZ9Z0BU",SESSION_NAME_HOME_CHART_AUMY_VIDEO:"home-chart-aumy-video",SELECT_SESSION_HOME_CHART_HAN_VIDEO:"#_chart_videoIWZ9Z0BZ",SESSION_NAME_HOME_CHART_HAN_VIDEO:"home-chart-han-video",SELECT_SESSION_HOME_CHART_VIET_VIDEO_ICON_PLAY_ALL:"._chart_videoIWZ9Z08W.icon-play-all",SESSION_NAME_HOME_CHART_VIET_VIDEO_ICON_PLAY_ALL:"home-chart-viet-video-icon-play-all",SELECT_SESSION_HOME_CHART_AUMY_VIDEO_ICON_PLAY_ALL:"._chart_videoIWZ9Z0BU.icon-play-all",SESSION_NAME_HOME_CHART_AUMY_VIDEO_ICON_PLAY_ALL:"home-chart-aumy-video-icon-play-all",SELECT_SESSION_HOME_CHART_HAN_VIDEO_ICON_PLAY_ALL:"._chart_videoIWZ9Z0BZ.icon-play-all",SESSION_NAME_HOME_CHART_HAN_VIDEO_ICON_PLAY_ALL:"home-chart-han-video-icon-play-all",SELECT_SESSION_HOME_CHART_VIET_ALBUM:"#_chart_albumIWZ9Z08O",SESSION_NAME_HOME_CHART_VIET_ALBUM:"home-chart-viet-album",SELECT_SESSION_HOME_CHART_AUMY_ALBUM:"#_chart_albumIWZ9Z0B6",SESSION_NAME_HOME_CHART_AUMY_ALBUM:"home-chart-aumy-album",SELECT_SESSION_HOME_CHART_HAN_ALBUM:"#_chart_albumIWZ9Z0B7",SESSION_NAME_HOME_CHART_HAN_ALBUM:"home-chart-han-album",SELECT_SESSION_TOPIC_COLLECTION:".page-hottopic",SESSION_NAME_TOPIC_DETAILT_COLLECTION:"topic-detail-collection",SESSION_NAME_TOPIC_PLAYLIST_COLLECTION:"topic-playlist-collection",SESSION_NAME_TOPIC_VIDEO_COLLECTION:"topic-video-collection",SELECT_SESSION_SEARCH_SONG:"#song-search-rs",SESSION_NAME_SEARCH_SONG_SONG:"search-song",SELECT_SESSION_SEARCH_VIDEO:"#video-search-rs",SESSION_NAME_SEARCH_VIDEO:"search-video",SELECT_SESSION_SEARCH_ALBUM:"#playlist-search-rs",SESSION_NAME_SEARCH_ALBUM:"topic-album"},getRedirectPageName:function(){return this.redirectPageName},setRedirectPageName:function(t){this.redirectPageName=t},getRedirectMediaId:function(){return this.redirectMediaId},setRedirectMediaId:function(t){this.redirectMediaId=t},getOrder:function(){return this.order},setOrder:function(t,e){if(zmp3LogCommon.isValidParam(t)){var o=t.split("_")
if(o.length>0){var n=o[o.length-1]
try{$.isNumeric(n)&&(this.order=n)}catch(i){console.log("Exception at zmp3LogRef.setOrder")}}}else if(zmp3LogCommon.isValidParam(e))try{$.isNumeric(e)&&(this.order=e)}catch(i){console.log("Exception at zmp3LogRef.setOrder")}},getTuser:function(){return zmp3LogCommon.isValidParam(this.tuser)||this.setTuser(),this.tuser},setTuser:function(){function t(t){for(var e=t+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var i=o[n];" "==i.charAt(0);)i=i.substring(1)
if(0==i.indexOf(e))return i.substring(e.length,i.length)}return""}this.tuser=t("tuser")},setRedirectParams:function(t){var e=t.split("/")
if(6===e.length){var o=e[3]
zmp3LogCommon.isValidParam(o)&&this.setRedirectPageName(o)
var n=e[5],i=n.substring(0,8)
zmp3LogCommon.isValidParam(i)&&this.setRedirectMediaId(i)}else if(4===e.length){var o=e[1]
zmp3LogCommon.isValidParam(o)&&this.setRedirectPageName(o)
var n=e[3],i=n.substring(0,8)
zmp3LogCommon.isValidParam(i)&&this.setRedirectMediaId(i)}else if(5===e.length){var o=e[3]
zmp3LogCommon.isValidParam(o)&&this.setRedirectPageName(o)}},checkTypeRedirect:function(t){var e=0
if(zmp3LogCommon.isValidParam(t))switch(t.which){case 1:e=t.ctrlKey?2:1
break
case 2:e=2
break
case 3:e=0
break
default:e=1}return e},handlingRedirect:function(t,e){try{1===e&&(window.location=t),2===e&&window.open(t,"_blank")}catch(o){console.log("Exception at zmp3LogRef.handlingRedirect",o)}},getJsonFromUrl:function(){var t=location.search.substr(1),e={}
return t.split("&").forEach(function(t){var o=t.split("=")
e[o[0]]=decodeURIComponent(o[1])}),e},commonEventListener:function(t,e,o,n){zmp3LogCommon.isValidParam(t)&&zmp3LogCommon.isValidParam(o)&&$(t).on("click",e,function(t){try{var e=0
if(e=zmp3LogCommon.isValidParam(this.target)&&"_blank"===this.target?2:zmp3LogRef.checkTypeRedirect(t),0!==e&&zmp3LogCommon.isValidParam(this.href)){var i=this.href
if(zmp3LogCommon.isValidParam(i)&&(t.preventDefault(),n=n||{},zmp3LogCommon.isValidParam(i))){if(zmp3LogRef.setRedirectParams(i),n.mediaId=zmp3LogRef.getRedirectMediaId(),!zmp3LogCommon.isValidParam(n.mediaId))return null
if(n.pageName=zmp3LogRef.getRedirectPageName(),n.username=zmp3LogCommon.getUsername(),n.userId=zmp3LogCommon.getUserId(),n.zaloId=zmp3LogCommon.getZaloId(),zmp3LogCommon.setIsVip(),n.isVip=zmp3LogCommon.getIsVip(),"object"==typeof ZA){if(ZA.getVisitorID(function(t){n.visitorId=t}),!zmp3LogCommon.isValidParam(n.visitorId))return
n.fromPage=zmp3LogCommon.getPageName(),n.fromSession=o,n.fromMediaId=zmp3LogCommon.getPageId()
var a=$(this).attr("tracking"),s=$(this).attr("order")
if((zmp3LogCommon.isValidParam(a)||zmp3LogCommon.isValidParam(s))&&(zmp3LogRef.setOrder(a,s),zmp3LogCommon.isValidParam(zmp3LogRef.getOrder())&&(n.order=zmp3LogRef.getOrder())),!zmp3LogCommon.isValidParam(n.order)){var r=$("li#songrec"+n.mediaId).index()
r>0&&(n.order=r)}if(!zmp3LogCommon.isValidParam(n.order)){var m=$("li#videorec"+n.mediaId).index()
m>0&&(n.order=m)}if(!zmp3LogCommon.isValidParam(n.order)){var c=$("li#playlistrec"+n.mediaId).index()
c>0&&(n.order=c)}zmp3LogCommon.isValidParam($("#sug form input").val())&&(n.fromKeySearch=$("#sug form input").val()),n.tuser=zmp3LogRef.getTuser()
var l=zmp3LogCommon.encode(n)
zmp3LogCommon.isValidParam(l)&&zmp3LogCommon.push(l,zmp3LogRef.constants.LOG_CATEGORY_REF)}}}}catch(g){console.log("Exception at zmp3LogRef.commonHandlingEvent",g)}finally{zmp3LogCommon.isValidParam(this.href)&&zmp3LogCommon.isValidParam(e)&&zmp3LogRef.handlingRedirect(this.href,e)}})},checkLocalStorageSearchSuggest:function(){try{if("undefined"!=typeof localStorage){var t=localStorage.getItem("__zmp3seachsugnf")
if(null!==t&&""!==t&&(null===MP3.MEDIAID||"undefined"===MP3.MEDIAID||""===MP3.MEDIAID)){var e={},o=t.split(".")
if(null!==o&&3===o.length){e.fromKeySearch=o[0],e.mediaId=o[1],e.pageName=o[2]
var n=zmp3LogCommon.encode(e)
zmp3LogCommon.isValidParam(n)&&zmp3LogCommon.push(n,zmp3LogRef.constants.LOG_CATEGORY_SEACH_SUGGEST_NOT_FOUNND)}}window.localStorage.removeItem("__zmp3seachsugnf")}}catch(i){console.log("Exception at zmp3LogRef.checkLocalStorageSearchSuggest",i)}},setLocalStorageSearchSuggest:function(t){try{if(zmp3LogCommon.isValidParam(t)&&zmp3LogCommon.isValidParam(t.fromKeySearch)&&zmp3LogCommon.isValidParam(t.mediaId)&&zmp3LogCommon.isValidParam(t.pageName)){var e=""
e=t.fromKeySearch+"."+t.mediaId+"."+t.pageName,"undefined"!=typeof localStorage&&localStorage.setItem("__zmp3seachsugnf",e)}}catch(o){console.log("Exception at zmp3LogRef.setLocalStorageSearchSuggest",o)}},eventListenerSearchSuggest:function(t,e,o,n){zmp3LogCommon.isValidParam(t)&&zmp3LogCommon.isValidParam(o)&&$(t).on("click",e,function(t){try{var e=0
if(e=zmp3LogCommon.isValidParam(this.target)&&"_blank"===this.target?2:zmp3LogRef.checkTypeRedirect(t),0!==e&&zmp3LogCommon.isValidParam(this.href)){var i=this.href
if(zmp3LogCommon.isValidParam(i)&&(t.preventDefault(),n=n||{},zmp3LogCommon.isValidParam(i))){if(zmp3LogRef.setRedirectParams(i),""===zmp3LogRef.getRedirectMediaId()&&void 0!==$(this).data()&&"undefined"!==$(this).data().id&&zmp3LogRef.setRedirectMediaId($(this).data().id),n.mediaId=zmp3LogRef.getRedirectMediaId(),!zmp3LogCommon.isValidParam(n.mediaId))return null
n.pageName=zmp3LogRef.getRedirectPageName(),n.username=zmp3LogCommon.getUsername(),n.userId=zmp3LogCommon.getUserId(),n.zaloId=zmp3LogCommon.getZaloId(),zmp3LogCommon.setIsVip(),n.isVip=zmp3LogCommon.getIsVip(),n.fromPage=zmp3LogCommon.getPageName(),n.fromSession=o,n.fromMediaId=zmp3LogCommon.getPageId()
var a=$(this).attr("tracking"),s=$(this).attr("order")
if((zmp3LogCommon.isValidParam(a)||zmp3LogCommon.isValidParam(s))&&(zmp3LogRef.setOrder(a,s),zmp3LogCommon.isValidParam(zmp3LogRef.getOrder())&&(n.order=zmp3LogRef.getOrder())),!zmp3LogCommon.isValidParam(n.order)){var r=$("li#songrec"+n.mediaId).index()
r>0&&(n.order=r)}if(!zmp3LogCommon.isValidParam(n.order)){var m=$("li#videorec"+n.mediaId).index()
m>0&&(n.order=m)}if(!zmp3LogCommon.isValidParam(n.order)){var c=$("li#playlistrec"+n.mediaId).index()
c>0&&(n.order=c)}zmp3LogCommon.isValidParam($("#sug form input").val())&&(n.fromKeySearch=$("#sug form input").val()),"object"==typeof ZA&&ZA.getVisitorID(function(t){if(n.visitorId=t,zmp3LogCommon.isValidParam(n.visitorId)){zmp3LogRef.setLocalStorageSearchSuggest(n)
var e=zmp3LogCommon.encode(n)
zmp3LogCommon.isValidParam(e)&&zmp3LogCommon.push(e,zmp3LogRef.constants.LOG_CATEGORY_REF)}})}}}catch(l){console.log("Exception at zmp3LogRef.commonHandlingEvent",l)}finally{zmp3LogCommon.isValidParam(this.href)&&zmp3LogCommon.isValidParam(e)&&zmp3LogRef.handlingRedirect(this.href,e)}})},eventSessionSearchSuggest:function(){function t(t){if(!zmp3LogCommon.isValidParam(t))return null
var e={}
return zmp3LogRef.setRedirectParams(t),e.mediaId=zmp3LogRef.getRedirectMediaId(),zmp3LogCommon.isValidParam(e.mediaId)?(e.pageName=zmp3LogRef.getRedirectPageName(),e.username=zmp3LogCommon.getUsername(),e.userId=zmp3LogCommon.getUserId(),e.zaloId=zmp3LogCommon.getZaloId(),zmp3LogCommon.setIsVip(),e.isVip=zmp3LogCommon.getIsVip(),e.fromPage=zmp3LogCommon.getPageName(),e.fromSession=zmp3LogRef.constants.SESSION_NAME_SEARCH_SUGGEST,e.fromMediaId=zmp3LogCommon.getPageId(),e.fromKeySearch=$("#sug form input").val(),void("object"==typeof ZA&&ZA.getVisitorID(function(t){if(e.visitorId=t,zmp3LogCommon.isValidParam(e.visitorId)){zmp3LogRef.setLocalStorageSearchSuggest(e)
var o=zmp3LogCommon.encode(e)
zmp3LogCommon.isValidParam(o)&&zmp3LogCommon.push(o,zmp3LogRef.constants.LOG_CATEGORY_REF)}}))):null}var e=0,o=""
try{var n=this.constants.SELECT_SESSION_SEARCH_SUGGEST,i="a.track-log",a=zmp3LogRef.constants.SESSION_NAME_SEARCH_SUGGEST,s={}
s.fromKeySearch=$("#sug form input").val(),this.eventListenerSearchSuggest(n,i,a,s)
var r=$("#sug"),m=$(".fn-result",r)
$('input[name="q"]',r).keydown(function(n){var i=$(".fn-list .fn-item.active",m)
i.length>0&&13===n.keyCode&&(e=1,o=$(".fn-link",i).attr("href"),t(o),zmp3LogCommon.isValidParam(o)&&zmp3LogRef.handlingRedirect(o,e))})}catch(c){console.log("Exception at zmp3LogRef.listenSessionRecommend: ",c)}},eventSessionRecommend:function(){try{var t=this.constants.SELECT_SESSION_PLAY_RECOMMEND,e="a.track-log",o="",n=zmp3LogCommon.getPageName()
zmp3LogCommon.isValidParam(n)&&(n===zmp3LogCommon.constants.SONG_PAGE_NAME&&(o=zmp3LogRef.constants.SESSION_NAME_SONG_RECOMMEND),n===zmp3LogCommon.constants.VIDEO_PAGE_NAME&&(o=zmp3LogRef.constants.SESSION_NAME_VIDEO_RECOMMEND),n===zmp3LogCommon.constants.ALBUM_PAGE_NAME&&(o=zmp3LogRef.constants.SESSION_NAME_ALBUM_RECOMMEND)),this.commonEventListener(t,e,o,"")}catch(i){console.log("Exception at zmp3LogRef.eventSessionRecommend",i)}},eventSessionPlaylistItems:function(){try{var t=this.constants.SELECT_SESSION_PLAYLIST_ITEMS_ICON_REDIRECT,e="a.track-log",o=zmp3LogRef.constants.SESSION_NAME_PLAYLIST_ITEMS_ICON_REDIRECT
this.commonEventListener(t,e,o,"")}catch(n){console.log("Exception at zmp3LogRef.eventSessionRecommend",n)}},eventSessionAlbumRelative:function(){try{var t=this.constants.SELECT_SESSION_ALBUM_RELATIVE,e="a.track-log",o=zmp3LogRef.constants.SESSION_NAME_ALBUM_RELATIVE
this.commonEventListener(t,e,o,"")}catch(n){console.log("Exception at zmp3LogRef.eventSessionAlbumRelative",n)}},eventSessionVideoRelative:function(){try{var t=this.constants.SELECT_SESSION_VIDEO_RELATIVE,e="a.track-log",o=zmp3LogRef.constants.SESSION_NAME_VIDEO_RELATIVE
this.commonEventListener(t,e,o,"")}catch(n){console.log("Exception at zmp3LogRef.eventSessionVideoRelative",n)}},eventSessionPlaylistCollection:function(){try{var t=this.constants.SELECT_SESSION_PLAYLIST_COLLECTION,e="a",o=zmp3LogRef.constants.SESSION_NAME_PLAYLIST_COLLECTION
this.commonEventListener(t,e,o,"")}catch(n){console.log("Exception at zmp3LogRef.eventSessionPlaylistCollection",n)}},eventSessionJumpMV:function(){try{var t=this.constants.SELECT_SESSION_PLAY_ICON_JUMP_MV,e="a.track-log",o=zmp3LogRef.constants.SESSION_NAME_PLAY_ICON_JUMP_MV
this.commonEventListener(t,e,o,"")}catch(n){console.log("Exception at zmp3LogRef.eventSessionJumpMV",n)}},eventSessionJumpMVInPlaylistItems:function(){try{var t=this.constants.SELECT_SESSION_PLAYLIST_ITEMS_ICON_JUMP_MV,e="a.track-log",o=zmp3LogRef.constants.SESSION_NAME_PLAYLIST_ITEMS_ICON_JUMP_MV
this.commonEventListener(t,e,o,"")}catch(n){console.log("Exception at zmp3LogRef.eventSessionJumpMVInPlaylistItems",n)}},eventSessionHomeSlideBanner:function(){try{var t=this.constants.SELECT_SESSION_HOME_SLIDES_BANNER,e="a.track-log",o=zmp3LogRef.constants.SESSION_NAME_HOME_SLIDES_BANNER
this.commonEventListener(t,e,o,"")}catch(n){console.log("Exception at zmp3LogRef.eventSessionHomeSlideBanner",n)}},eventSessionHomeAlbumHot:function(){try{var t=this.constants.SELECT_SESSION_HOME_ALBUM_HOT,e="a.track-log",o=zmp3LogRef.constants.SESSION_NAME_HOME_ALBUM_HOT
this.commonEventListener(t,e,o,"")}catch(n){console.log("Exception at zmp3LogRef.eventSessionHomeAlbumHot",n)}},eventSessionHomePlaylistCollection:function(){try{var t=this.constants.SELECT_SESSION_HOME_PLAYLIST_COLLECTION,e="a.track-log",o=zmp3LogRef.constants.SESSION_NAME_HOME_PLAYLIST_COLLECTION
this.commonEventListener(t,e,o,"")}catch(n){console.log("Exception at zmp3LogRef.eventSessionHomePlaylistCollection",n)}},eventSessionHomeVideoHot:function(){try{var t=this.constants.SELECT_SESSION_HOME_VIDEO_HOT,e="a.track-log",o=zmp3LogRef.constants.SESSION_NAME_HOME_VIDEO_HOT
this.commonEventListener(t,e,o,"")}catch(n){console.log("Exception at zmp3LogRef.eventSessionHomeVideoHot",n)}},eventSessionHomeVietHotSong:function(){try{var t=this.constants.SELECT_SESSION_HOME_VIET_HOT_SONG,e="a.track-log",o=zmp3LogRef.constants.SESSION_NAME_HOME_VIET_HOT_SONG
this.commonEventListener(t,e,o,"")}catch(n){console.log("Exception at zmp3LogRef.eventSessionHomeVietHotSong",n)}},eventSessionHomeVietNewSong:function(){try{var t=this.constants.SELECT_SESSION_HOME_VIET_NEW_SONG,e="a.track-log",o=zmp3LogRef.constants.SESSION_NAME_HOME_VIET_NEW_SONG
this.commonEventListener(t,e,o,"")}catch(n){console.log("Exception at zmp3LogRef.eventSessionHomeVietNewSong",n)}},eventSessionHomeChartSong:function(){try{var t=this.constants.SELECT_SESSION_HOME_CHART_VIET_SONG,e="a.track-log",o=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_VIET_SONG
this.commonEventListener(t,e,o,"")
var t=this.constants.SELECT_SESSION_HOME_CHART_AUMY_SONG,e="a.track-log",o=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_AUMY_SONG
this.commonEventListener(t,e,o,"")
var t=this.constants.SELECT_SESSION_HOME_CHART_HAN_SONG,e="a.track-log",o=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_HAN_SONG
this.commonEventListener(t,e,o,"")
var t=this.constants.SELECT_SESSION_HOME_CHART_VIET_SONG_ICON_PLAY_ALL,e="",o=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_VIET_SONG_ICON_PLAY_ALL
this.commonEventListener(t,e,o,"")
var t=this.constants.SELECT_SESSION_HOME_CHART_AUMY_SONG_ICON_PLAY_ALL,e="",o=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_AUMY_SONG_ICON_PLAY_ALL
this.commonEventListener(t,e,o,"")
var t=this.constants.SELECT_SESSION_HOME_CHART_HAN_SONG_ICON_PLAY_ALL,e="",o=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_HAN_SONG_ICON_PLAY_ALL
this.commonEventListener(t,e,o,"")}catch(n){console.log("Exception at zmp3LogRef.eventSessionHomeChartSong",n)}},eventSessionHomeChartVideo:function(){try{var t=this.constants.SELECT_SESSION_HOME_CHART_VIET_VIDEO,e="a.track-log",o=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_VIET_VIDEO
this.commonEventListener(t,e,o,"")
var t=this.constants.SELECT_SESSION_HOME_CHART_AUMY_VIDEO,e="a.track-log",o=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_AUMY_VIDEO
this.commonEventListener(t,e,o,"")
var t=this.constants.SELECT_SESSION_HOME_CHART_HAN_VIDEO,e="a.track-log",o=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_HAN_VIDEO
this.commonEventListener(t,e,o,"")
var t=this.constants.SELECT_SESSION_HOME_CHART_VIET_VIDEO_ICON_PLAY_ALL,e="",o=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_VIET_VIDEO_ICON_PLAY_ALL
this.commonEventListener(t,e,o,"")
var t=this.constants.SELECT_SESSION_HOME_CHART_AUMY_VIDEO_ICON_PLAY_ALL,e="",o=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_AUMY_VIDEO_ICON_PLAY_ALL
this.commonEventListener(t,e,o,"")
var t=this.constants.SELECT_SESSION_HOME_CHART_HAN_VIDEO_ICON_PLAY_ALL,e="",o=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_HAN_VIDEO_ICON_PLAY_ALL
this.commonEventListener(t,e,o,"")}catch(n){console.log("Exception at zmp3LogRef.eventSessionHomeChartVideo",n)}},eventSessionHomeChartAlbum:function(){try{var t=this.constants.SELECT_SESSION_HOME_CHART_VIET_ALBUM,e="a.track-log",o=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_VIET_ALBUM
this.commonEventListener(t,e,o,"")
var t=this.constants.SELECT_SESSION_HOME_CHART_AUMY_ALBUM,e="a.track-log",o=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_AUMY_ALBUM
this.commonEventListener(t,e,o,"")
var t=this.constants.SELECT_SESSION_HOME_CHART_HAN_ALBUM,e="a.track-log",o=zmp3LogRef.constants.SESSION_NAME_HOME_CHART_HAN_ALBUM
this.commonEventListener(t,e,o,"")}catch(n){console.log("Exception at zmp3LogRef.eventSessionHomeChartAlbum",n)}},eventSessionTopic:function(){try{var t=this.constants.SELECT_SESSION_TOPIC_COLLECTION,e="a.track-log",o="",n=this.getJsonFromUrl()
zmp3LogCommon.isValidParam(n)&&zmp3LogCommon.isValidParam(n.view)?"playlist"===n.view?o=this.constants.SESSION_NAME_TOPIC_PLAYLIST_COLLECTION:"video"===n.view&&(o=this.constants.SESSION_NAME_TOPIC_VIDEO_COLLECTION):o=this.constants.SESSION_NAME_TOPIC_DETAILT_COLLECTION,this.commonEventListener(t,e,o,"")}catch(i){console.log("Exception at zmp3LogRef.eventSessionTopic",i)}},eventSessionSearchPage:function(){try{var t=this.constants.SELECT_SESSION_SEARCH_SONG,e="a.track-log",o=this.constants.SESSION_NAME_SEARCH_SONG_SONG
this.commonEventListener(t,e,o,"")
var t=this.constants.SELECT_SESSION_SEARCH_VIDEO,e="a.track-log",o=this.constants.SESSION_NAME_SEARCH_VIDEO
this.commonEventListener(t,e,o,"")
var t=this.constants.SELECT_SESSION_SEARCH_ALBUM,e="a.track-log",o=this.constants.SESSION_NAME_SEARCH_ALBUM
this.commonEventListener(t,e,o,"")}catch(n){console.log("Exception at zmp3LogRef.eventSessionSearchPage",n)}},handlingRefLog:function(){try{switch(zmp3LogCommon.getPageName()){case zmp3LogCommon.constants.HOME_PAGE_NAME:this.eventSessionHomeSlideBanner(),this.eventSessionHomeAlbumHot(),this.eventSessionHomePlaylistCollection(),this.eventSessionHomeVideoHot(),this.eventSessionHomeVietHotSong(),this.eventSessionHomeVietNewSong(),this.eventSessionHomeChartSong(),this.eventSessionHomeChartVideo(),this.eventSessionHomeChartAlbum()
break
case zmp3LogCommon.constants.SONG_PAGE_NAME:this.eventSessionRecommend(),this.eventSessionAlbumRelative(),this.eventSessionVideoRelative(),this.eventSessionPlaylistCollection(),this.eventSessionJumpMV()
break
case zmp3LogCommon.constants.VIDEO_PAGE_NAME:this.eventSessionRecommend(),this.eventSessionAlbumRelative(),this.eventSessionVideoRelative()
break
case zmp3LogCommon.constants.ALBUM_PAGE_NAME:case zmp3LogCommon.constants.PLAYLIST_PAGE_NAME:this.eventSessionRecommend(),this.eventSessionAlbumRelative(),this.eventSessionVideoRelative(),this.eventSessionPlaylistCollection(),this.eventSessionPlaylistItems(),this.eventSessionJumpMV(),this.eventSessionJumpMVInPlaylistItems()
break
case zmp3LogCommon.constants.TOPIC_PAGE_NAME:this.eventSessionTopic()
break
case zmp3LogCommon.constants.SEARCH_PAGE_NAME:this.eventSessionSearchPage()}this.eventSessionSearchSuggest(),this.checkLocalStorageSearchSuggest()}catch(t){console.log("Exception at zmp3LogRef.handlingRefLog: ",t)}}}
if(void 0!==zmp3LogRef&&null!==zmp3LogRef&&"function"==typeof zmp3LogRef.handlingRefLog)try{$(function(){zmp3LogRef.handlingRefLog()})}catch(ex){console.log("Exception at zmp3LogRef.handlingRefLog: ",ex)}var zmp3LogSearch={constants:{LOG_CATEGORY_SEARCH:"log-search",LOG_ACTION_ID_PARAMS:"params"},parseSearchParamsObjectFromURL:function(){try{var t={},e="q",o="t",n="sort",i="upload",a="filter",s="genre",r=window.location.search
if("undefined"!=typeof decodeURIComponent&&"function"==typeof decodeURIComponent&&(r=decodeURIComponent(r)),zmp3LogCommon.isValidParam(r)){r=r.substring(1,r.length)
for(var m=r.split("&"),c=[],l=[],g=[],_=[],L=[],S=[],E=0;E<m.length;E++){var d=m[E].split("=")
if(zmp3LogCommon.isValidParam(d)&&zmp3LogCommon.isValidParam(d[0])&&zmp3LogCommon.isValidParam(d[1])){var p=d[0],h=d[1]
if(zmp3LogCommon.isValidParam(h))switch(p){case e:c.push(h)
break
case o:l.push(h)
break
case n:g.push(h)
break
case i:_.push(h)
break
case a:L.push(h)
break
case s:S.push(h)}}}return zmp3LogCommon.isValidParam(c)&&(t[e]=c),zmp3LogCommon.isValidParam(l)&&(t[o]=l),zmp3LogCommon.isValidParam(g)&&(t[n]=g),zmp3LogCommon.isValidParam(_)&&(t[i]=_),zmp3LogCommon.isValidParam(L)&&(t[a]=L),zmp3LogCommon.isValidParam(S)&&(t[s]=S),t}}catch(u){console.log("Exception at zmp3LogSearch.parseSearchParamsObjectFromURL: ",u)}},handlingParamsSearchLog:function(){try{if("tim-kiem"!==zmp3LogCommon.getPageName())return null
if(urlParams=window.location.search.substring(1),!zmp3LogCommon.isValidParam(urlParams))return null
var t=this.parseSearchParamsObjectFromURL()
if(zmp3LogCommon.isValidParam(t)){var e={}
e.pageName=zmp3LogCommon.getPageName(),e.username=zmp3LogCommon.getUsername(),e.userId=zmp3LogCommon.getUserId(),e.zaloId=zmp3LogCommon.getZaloId(),zmp3LogCommon.setIsVip(),e.isVip=zmp3LogCommon.getIsVip()
for(var o in t)zmp3LogCommon.isValidParam(o)&&t.hasOwnProperty(o)&&zmp3LogCommon.isValidParam(t[o])&&"undefined"!==t[o]&&(e[o]=t[o])
"object"==typeof ZA&&ZA.getVisitorID(function(t){if(e.visitorId=t,zmp3LogCommon.isValidParam(e.visitorId)){var o=zmp3LogCommon.encode(e)
if(zmp3LogCommon.isValidParam(o)){var n=zmp3LogSearch.constants.LOG_CATEGORY_SEARCH+"/"+zmp3LogSearch.constants.LOG_ACTION_ID_PARAMS
zmp3LogCommon.push(o,n)}}})}}catch(n){console.log("Exception at zmp3LogSearch.handlingRefLog: ",n)}}}
if(void 0!==zmp3LogSearch&&null!==zmp3LogSearch&&"function"==typeof zmp3LogSearch.handlingParamsSearchLog)try{$(function(){zmp3LogSearch.handlingParamsSearchLog()})}catch(ex){console.log("Exception at initLog.zmp3LogSearch.handlingParamsSearchLog: ",ex)}var z3Log={timer:null,timer2:null,urlLog1:MP3.LOG_URL+"log/index",urlLog2:MP3.LOG_URL+"log/mp3log",urlLogv21:MP3.LOG_URL+"logv2/index",urlLogv2:MP3.LOG_URL+"logv2/mp3log",start:function(t,e,o){null!==this.timer&&clearTimeout(this.timer),null!==this.timer2&&clearTimeout(this.timer2),this.data="",$.get(MP3.XHR_URL+"/log/get-info",{id:t,type:e},function(t){t.data&&"object"==typeof ZA&&ZA.getVisitorID(function(e){$.getJSON(MP3.LOG_URL+"logv2/index?sessid="+$.cookie("__mp3sessid")+"&callback=?"),z3Log.timer=setTimeout(function(){var o="&visitorid="+e,n=0==MP3.VIP?"0":"1",i="&isvip="+n,a="&ref="+document.referrer
$.getJSON(MP3.LOG_URL+"logv2/mp3log?sessid="+$.cookie("__mp3sessid")+"&data="+t.data+o+i+a+"&callback=?")},35e3)})})},writeLog:function(t,e){t&&$.get(e+"?ckss="+$.cookie("___sessid")+"&sessid="+$.cookie("__mp3sessid")+"&callback=?","","dataType:text")},writeLogInfo:function(t,e){if(e||(e=this.urlLog2),t)try{$.get(e+"?ckss="+$.cookie("___sessid")+"&sessid="+$.cookie("__mp3sessid")+"&data="+t+"&callback=?","","dataType:text")}catch(o){}},getUid:function(){return"xxxxxxxxxxxx".replace(/[x]/g,function(t){var e=16*Math.random()|0,o="x"==t?e:3&e|8
return o.toString(16)}).toUpperCase()},getPageId:function(){var t=window.location.href,e=t.split("/")
if(e.length>=6){var o=e[5],n=o.substring(0,8)
return n}return""},getPageName:function(){var t=window.location.href,e=t.split("/")
return zmp3LogCommon.isValidParam(e)?e.length>=4?e[3]:"":void 0},initLogInfoVal:function(){var t=this.getPageId,e=this.getPageName()
""!=t&&""!=e&&$.get(MP3.XHR_URL+"/log/get-info",{id:t,type:e},function(t){if(t.data&&"object"==typeof MP3&&(MP3.LOG_INFO=t.data,MP3.LOG_INFO)){var e=0,o="",n=0,i=0,a=document.referrer,s=/[a-z0-9-]+\//gi
if(a&&a.indexOf(MP3.MP3_URL)>-1)switch(a=a.replace(MP3.MP3_URL,""),0==a.indexOf("/")&&(a=a.substr(1)),a=a.substr(0,a.indexOf(".")),arr=a.split("/"),o=a.replace(s,""),!0){case 0==a.indexOf("bai-hat"):e=1
break
case 0==a.indexOf("video-clip"):e=3
break
case 0==a.indexOf("album"):case 0==a.indexOf("playlist"):e=2}var r=location.pathname.lastIndexOf("/"),m=location.pathname.substring(1,r).toLowerCase().split("/").slice(0,2)
switch(path=m.join("/"),m[0]){case"bai-hat":case"album":case"playlist":case"video-clip":i=35e3
break
default:i=0}if(MP3.LOG_INFO+="&fromId="+o+"&type="+e+"&fromBox="+n,i>0){z3Log.writeLog(MP3.LOG_INFO,z3Log.urlLogv21)}}})}}
z3Log.initLogInfoVal(),void 0===$.cookie("__mp3sessid")&&$.cookie("__mp3sessid",z3Log.getUid(),{domain:"mp3.zing.vn",path:"/"})
var trackingGAEvent={init:function(){this.eventSearchBoxClick(),this.eventSearchBoxEnter(),this.eventSearchBoxTopResult(),this.eventSearchResultAll(),this.eventSearchResultPlaylist(),this.eventSearchResultVideo(),this.eventSearchFillter(),this.eventNavigationBar(),this.eventSuggestion(),this.eventsSongPage()},tracking:function(t,e,o){"undefined"!=typeof ga&&ga("mp3.send","event",{eventCategory:t,eventAction:e,eventLabel:o})},trackingHomePage:function(t,e,o){var n="/"==window.location.pathname
"undefined"!=typeof ga&&n&&ga("mp3.send","event",{eventCategory:t,eventAction:e,eventLabel:o})},formatingIndex:function(t){var e=""
return"number"==typeof t&&(t++,e=10>t?"0"+t:t),e},eventSearchBoxClick:function(){$("#sug input").click(function(){trackingGAEvent.trackingHomePage("Searchbox_box","Click","Searchbox_Clickonbox")})},eventSearchBoxEnter:function(){$("#sug button:submit").click(function(){trackingGAEvent.trackingHomePage("Searchbox_box","Click","Searchbox_Click")}),$("#sug input").keyup(function(t){13==t.keyCode&&trackingGAEvent.trackingHomePage("Searchbox_box","Enter","Searchbox_Enter")})},eventSearchBoxTopResult:function(){$("#sugResult").on("click","#sugTop a.track-log",function(){trackingGAEvent.trackingHomePage("Searchbox_Top_Result","Click","Searchbox_Topresult")}),$("#sugResult").on("click","#tplSugArtist a.track-log",function(){var t=$(this).parent().index()
t=trackingGAEvent.formatingIndex(t),trackingGAEvent.trackingHomePage("Searchbox_Artist","Click","Searchbox_Artist"+t)}),$("#sugResult").on("click","#tplSugSong a.track-log",function(){var t=$(this).parent().index()
t=trackingGAEvent.formatingIndex(t),trackingGAEvent.trackingHomePage("Searchbox_Song","Click","Searchbox_Song"+t)}),$("#sugResult").on("click","#tplSugAlbum a.track-log",function(){var t=$(this).parent().index()
t=trackingGAEvent.formatingIndex(t),trackingGAEvent.trackingHomePage("Searchbox_Album","Click","Searchbox_Album"+t)}),$("#sugResult").on("click","#tplSugVideo a.track-log",function(){var t=$(this).parent().index()
t=trackingGAEvent.formatingIndex(t),trackingGAEvent.trackingHomePage("Searchbox_Video","Click","Searchbox_Video"+t)})},eventSearchResultAll:function(){$(".search-tab-all").on("click",function(){trackingGAEvent.tracking("Searchresult_All","Click","Searchresult_All_Title")}),$(".top-search").on("click",function(){trackingGAEvent.tracking("Searchresult_All","Click","Searchresult_All_Topresult")}),$(".top-search-artist").on("click",function(){trackingGAEvent.tracking("Searchresult_All","Click","Searchresult_All_Artist")}),$("#song-search-rs").on("click",".item-song a.track-log",function(){var t=$(this).attr("order")
t++,10>+t&&(t="0"+t),trackingGAEvent.tracking("Searchresult_All","Click","Searchresult_All_Song_"+t)}),$(".search-all-rs-album-title").on("click",function(){$(this).attr("order")
trackingGAEvent.tracking("Searchresult_All","Click","Searchresult_All_Album_Title")}),$("#song-search-rs").on("click",".album-item a.track-log",function(){var t=$(this).attr("order")
t++,10>+t&&(t="0"+t),trackingGAEvent.tracking("Searchresult_All","Click","Searchresult_All_Album_"+t)}),$(".search-all-rs-video-title").on("click",function(){trackingGAEvent.tracking("Searchresult_All","Click","Searchresult_All_Video_Title")}),$("#song-search-rs").on("click",".video-item a.track-log",function(){var t=$(this).attr("order")
t++,10>+t&&(t="0"+t),trackingGAEvent.tracking("Searchresult_All","Click","Searchresult_All_Video_"+t)}),$(".search-all-rs-video-title").on("click",function(){var t=$(this).attr("order")
t++,10>+t&&(t="0"+t),trackingGAEvent.tracking("Searchresult_All","Click","Searchresult_All_Video_"+t)}),$("#song-search-rs").on("click",".pagination li a",function(){var t=!0
if("u"==$(this).text()&&trackingGAEvent.tracking("Searchresult_All","Click","Searchresult_All_Firstpage"),"Cui"==$(this).text()&&trackingGAEvent.tracking("Searchresult_All","Click","Searchresult_All_Lastpage"),">"==$(this).text()&&(trackingGAEvent.tracking("Searchresult_All","Click","Searchresult_All_Forward"),t=!1),"<"==$(this).text()&&(trackingGAEvent.tracking("Searchresult_All","Click","Searchresult_All_Back"),t=!1),t){var e=$(this).parent().index()
e=trackingGAEvent.formatingIndex(e),trackingGAEvent.tracking("Searchresult_All","Click","Searchresult_All_Page"+e)}})},eventSearchResultPlaylist:function(){$(".search-tab-playlist").on("click",function(){trackingGAEvent.tracking("Searchresult_Playlist","Click","Searchresult_Playlist_Title")}),$("#playlist-search-rs").on("click",".album-list .item a.track-log",function(){var t=$(this).attr("order")
t++,10>+t&&(t="0"+t),trackingGAEvent.tracking("Searchresult_Playlist","Click","Searchresult_Playlist_Album_"+t)}),$("#playlist-search-rs").on("click",".pagination li a",function(){var t=!0
if("u"==$(this).text()&&trackingGAEvent.tracking("Searchresult_Playlist","Click","Searchresult_Playlist_Firstpage"),"Cui"==$(this).text()&&trackingGAEvent.tracking("Searchresult_Playlist","Click","Searchresult_Playlist_Lastpage"),">"==$(this).text()&&(trackingGAEvent.tracking("Searchresult_Playlist","Click","Searchresult_Playlist_Forward"),t=!1),"<"==$(this).text()&&(trackingGAEvent.tracking("Searchresult_Playlist","Click","Searchresult_Playlist_Back"),t=!1),t){var e=$(this).parent().index()
e=trackingGAEvent.formatingIndex(e),trackingGAEvent.tracking("Searchresult_Playlist","Click","Searchresult_Playlist_Page"+e)}})},eventSearchResultVideo:function(){$(".search-tab-video").on("click",function(){trackingGAEvent.tracking("Searchresult_Video","Click","Searchresult_Video_Title")}),$("#video-search-rs").on("click",".video-list .item a.track-log",function(){var t=$(this).attr("order")
t++,10>+t&&(t="0"+t),trackingGAEvent.tracking("Searchresult_Video","Click","Searchresult_Video_MV_"+t)}),$("#video-search-rs").on("click",".pagination li a",function(){var t=!0
if("u"==$(this).text()&&trackingGAEvent.tracking("Searchresult_Video","Click","Searchresult_Video_Firstpage"),"Cui"==$(this).text()&&trackingGAEvent.tracking("Searchresult_Video","Click","Searchresult_Video_Lastpage"),">"==$(this).text()&&(trackingGAEvent.tracking("Searchresult_Video","Click","Searchresult_Video_Forward"),t=!1),"<"==$(this).text()&&(trackingGAEvent.tracking("Searchresult_Video","Click","Searchresult_Video_Back"),t=!1),t){var e=$(this).parent().index()
e=trackingGAEvent.formatingIndex(e),trackingGAEvent.tracking("Searchresult_Video","Click","Searchresult_Video_Page"+e)}})},eventSearchFillter:function(){$(".toggle-filter.fn-show").on("click",function(){trackingGAEvent.tracking("Searchfilter","Click","Searchfilter")})},eventNavigationBar:function(){$("#navbar-home").on("click",function(){trackingGAEvent.trackingHomePage("Navigation_Bar","Click","Navbar_home")}),$("#navbar-mymusic").on("click",function(){trackingGAEvent.trackingHomePage("Navigation_Bar","Click","Navbar_mymusic")}),$("#navbar-topic").on("click",function(){trackingGAEvent.trackingHomePage("Navigation_Bar","Click","Navbar_chude")}),$("#navbar-genrealbum").on("click",function(){trackingGAEvent.trackingHomePage("Navigation_Bar","Click","Navbar_theloaialbum")}),$("#navbar-genrevideo").on("click",function(){trackingGAEvent.trackingHomePage("Navigation_Bar","Click","Navbar_theloaivideo")}),$("#navbar-genreartist").on("click",function(){trackingGAEvent.trackingHomePage("Navigation_Bar","Click","Navbar_theloainghesi")}),$("#navbar-chart").on("click",function(){trackingGAEvent.trackingHomePage("Navigation_Bar","Click","Navbar_bangxephang")}),$("#navbar-top100").on("click",function(){trackingGAEvent.trackingHomePage("Navigation_Bar","Click","Navbar_top100")}),$("#navbar-realtime").on("click",function(){trackingGAEvent.trackingHomePage("Navigation_Bar","Click","Navbar_realtime")}),$("#navbar-radio").on("click",function(){trackingGAEvent.trackingHomePage("Navigation_Bar","Click","Navbar_radio")}),$("#navbar-vip").on("click",function(){trackingGAEvent.trackingHomePage("Navigation_Bar","Click","Navbar_vip")})},eventSuggestion:function(){function t(t,e,o){$(t).on("click",".btn-sw-off",function(){trackingGAEvent.tracking(e,"Autoplay","Turn_on")}),$(t).on("click",".btn-sw-on",function(){trackingGAEvent.tracking(e,"Autoplay","Turn_off")}),$(t).on("click","#"+o+"Rec ul > li",function(t){var o=+$(this).index()
o++,10>o&&(o="0"+o)
var n=$(this).find("a.track-log").attr("href")
trackingGAEvent.tracking(e,"Click_"+o,n)}),$(t).on("click","#block-"+o+"-suggest-more > li",function(t){var o=+$(this).index()
o+=11
var n=$(this).find("a.track-log").attr("href")
trackingGAEvent.tracking(e,"Click_"+o,n)}),$(t).on("click",".load-more span",function(){trackingGAEvent.tracking(e,"Click_More","Load_More_Suggestion")})}t("#block-song-suggest","Song_Suggestion","song"),t("#block-playlist-suggest","Album_Suggestion","playlist"),t("#block-video-suggest","Video_Suggestion","video")},eventsSongPage:function(){this.eventLikeZingMe(),this.eventLikeFacebook(),this.eventDownloadSongInSongPage(),this.eventAddSongToPlaylistInSongPage(),this.eventFeedbackInSongPage(),this.eventUpgradeVipInSongPage(),this.eventArtistInSongPage(),this.eventFollowArtistInSongPage(),this.eventAlbumInSongPage(),this.eventVideoInSongPage(),this.eventCollectionPlaylistInSongPage(),this.eventComment(),this.eventAudioPlayer()},eventLikeZingMe:function(){$(".fn-zlike").on("click",function(){trackingGAEvent.tracking("Play_Lovebutton","Click","Love_Button")})},eventLikeFacebook:function(){setTimeout(function(){"undefined"!=typeof FB&&FB.Event.subscribe("edge.create",function(t,e){trackingGAEvent.tracking("Play_Likebutton","Click","Like_Button")})},5e3)},eventDownloadSongInSongPage:function(){$(document).on("click",".fn-128",function(){trackingGAEvent.tracking("Play_Download","Click","Download_128")}),$(document).on("click",".fn-320",function(){trackingGAEvent.tracking("Play_Download","Click","Download_320")}),$(document).on("click",".fn-lossless",function(){trackingGAEvent.tracking("Play_Download","Click","Download_Lossless")})},eventAddSongToPlaylistInSongPage:function(){$(".fn-tab").click(function(){var t=$(this),e=t.data("panel")
".fn-tab-panel-addto"==e&&trackingGAEvent.tracking("Play_Addtoplaylist","Click","Add_to_playlist")})},eventFeedbackInSongPage:function(){$(".fn-tab").click(function(){var t=$(this),e=t.data("panel")
".fn-tab-panel-feedback"==e&&trackingGAEvent.tracking("Play_Feedback","Click","Feedback")})},eventUpgradeVipInSongPage:function(){$(document).on("click",".content-promote-func .fn-viprequire",function(){trackingGAEvent.tracking("Play_UpgradeVip","Click","VIP_Upgrade")})},eventArtistInSongPage:function(){$(".artist-track-log").on("click",function(){trackingGAEvent.tracking("Play_artist","Click","Artist")})},eventFollowArtistInSongPage:function(){$(document).on("click",".fn-follow",function(){trackingGAEvent.tracking("Play_followartist","Click","Follow_Artist")})},eventAlbumInSongPage:function(){$(document).on("click","#albumOfArtist h2 a",function(){trackingGAEvent.tracking("Play_Album","Click","Album_Title")}),$(document).on("click","#albumOfArtist .album-item",function(){var t=+$(this).attr("data-slick-index")
t++,10>t&&(t="0"+t),trackingGAEvent.tracking("Play_Album","Click_"+t,"Album_"+t)})},eventVideoInSongPage:function(){$(document).on("click","#videoOfArtist h2 a",function(){trackingGAEvent.tracking("Play_Video","Click","Video_Title")}),$(document).on("click","#videoOfArtist .video-item",function(){var t=+$(this).attr("data-slick-index")
t++,10>t&&(t="0"+t),trackingGAEvent.tracking("Play_Video","Click_"+t,"Video_"+t)})},eventCollectionPlaylistInSongPage:function(){$(document).on("click","#albumCollection h2 a",function(){trackingGAEvent.tracking("Play_Playlist","Click","Playlist_Title")}),$(document).on("click","#albumCollection .slick-slide",function(){var t=+$(this).attr("data-slick-index")
t++,10>t&&(t="0"+t),trackingGAEvent.tracking("Play_Playlist","Click_"+t,"Playlist_"+t)})},eventComment:function(){$(document).on("click",".box-comment form.fn-comment textarea:first",function(){trackingGAEvent.tracking("Play_comment","Click","#play_commentbox")}),$(document).on("click",".box-comment form:first button:submit",function(){trackingGAEvent.tracking("Play_comment","Click","#play_commentbutton")})},eventAudioPlayer:function(){}}
trackingGAEvent.init()
